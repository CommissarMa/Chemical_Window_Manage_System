# 橱窗管理系统使用说明
启动程序，主界面如下图所示，  
![main_gui](main_gui.png)  

# 整体使用流程
首先需要配置通道、橱窗、数据接口、检测间隔时间等，并且可以对配置进行保存或加载，然后可以开始检测。

# 通道
通道，即摄像头。软件中，我们可以添加通道或删除通道。每个通道需要一个通道名称以及通道配置。
## 添加通道与清空通道
添加通道的步骤如下：  
步骤1：单击“橱窗检测系统”，右下方会出现“新建通道”和“清空通道”按钮，如下图所示，  
![4-1](4-1.png)  
步骤2：单击“新建通道”按钮，弹出“新建通道”对话框，如下图所示，  
![4-2](4-2.png)  
步骤3：填写“通道名称”和“通道配置”。以实验室417为例，“通道名称”填入“实验室417”，通道配置填入：
rtsp://root:wo2026117@192.168.1.80/axis-media/media.amp，如下图所示，  
![4-3](4-3.png)  
步骤4：单击“保存”按钮，出现“实验室417”节点，如下图所示，  
![4-4](4-4.png)  
经过上述步骤，我们就完成了一个通道的添加。类似地，我们可以添加多个通道，如下图所示，  
![4-5](4-5.png)  
如果我们需要删除所有的通道，那么请单击上图右下角的“清空通道”按钮。清空通道后的效果如下图所示，即所有通道都已被删除。
![4-6](4-6.png)  

## 编辑通道与连接通道
编辑通道指修改通道的名称和配置。连接通道则是得到通道当前的画面。  
以“实验室417”通道为例，当我们需要编辑通道和连接通道时，我们需要单击“实验室417”节点，右下角会出现“修改名称”，“修改配置”，“连接通道”，“删除通道”按钮，如下图所示，  
![4-7](4-7.png)  
单击“修改名称”按钮，会弹出修改通道名称的对话框，如下图所示，可以对通道的名称进行修改。  
![4-8](4-8.png)  
单击“修改配置”按钮，会弹出修改通道配置的对话框，如下图所示，可以对通道的配置进行修改。  
![4-9](4-9.png)  
单击“连接通道”按钮，可以查看通道的当前画面，如下图所示，  
![4-10](4-10.png)  
如果通道配置有误或者网络设置不正确，则在单击“连接通道”按钮时，会弹出连接失败提示框，如下图所示，此时需要检查通道配置和网络设置。  
![4-11](4-11.png)

# 橱窗
橱窗，是整个软件检测的核心所在。如上图中的实验室画面可以看到，实验室中一共有3个橱窗，而软件最主要的功能就是负责检测橱窗的开关情况。每个橱窗的最上方贴有红色贴条，当红色贴条出现时，我们认为橱窗处于关闭状态，当红色贴条消失时，我们认为橱窗处于开启状态。因此，软件提供了添加橱窗，修改橱窗信息，删除橱窗等功能。  
## 添加橱窗
以上图为例，当通道已连接成功时，就可以进行橱窗的添加（通道未连接成功时，请先连接通道）。橱窗的添加步骤如下：按下左键，然后向右下方拖出矩形框，松开左键，会弹出新建橱窗对话框。（如果按下左键后向左上方拖出矩形框，则会导致检测过程中程序发生异常，请务必避免。如果绘制得不好，请删除并重新绘制）矩形框应完全包含红色贴条的位置，可以画的稍微大一些，但不能让其他红色的物体进入，以免干扰检测，示例如下图中的左侧白色矩形框所示，  
![4-12](4-12.png)  
新建橱窗对话框中，每个橱窗都需要一个名称以及ID，比如这里橱窗的名称可以为左侧橱窗，ID为1（ID需要向数据接口管理员沟通获取），填入之后的效果如下图所示，  
![4-13](4-13.png)  
单击保存按钮后，通道“实验室417”节点下出现了“左侧橱窗”节点，效果如下图所示，（类似地，重复以上步骤可以新建多个橱窗）  
![4-14](4-14.png)  
## 编辑橱窗与删除橱窗
单击“左侧橱窗”节点，右下角会出现“修改橱窗名称”，“修改橱窗ID”，“删除橱窗”按钮，如下图所示，  
![4-15](4-15.png)  
单击“修改橱窗名称”按钮可以修改橱窗的名称，单击“修改橱窗ID”按钮可以修改橱窗的ID，单击“删除橱窗”可以删除该橱窗。  

# 数据接口与检测时间间隔
##数据接口
单击选项，然后点击“修改数据接口Url”，如下图所示，  
![4-16](4-16.png)  
点击菜单项后，会弹出“修改数据接口Url”对话框，如下图所示，  
![4-17](4-17.png)  
数据接口Url是上传橱窗状态的接口，因此需要联系接口管理员获取，（示例：http://192.168.1.212:8022/BusinessModule/BedStandStatus/SetStatus）  

## 检测时间间隔
单击选项，然后点击“修改检测时间间隔”，弹出对话框，如下图所示，  
![4-18](4-18.png)  
注意，默认的间隔时间为5分钟，可以修改为任意整数，但请注意输入时不能有任何空格，字母等，不然检测时会报错。  

# 保存配置与加载配置
同样地，点击选项，会出现“保存配置”和“加载配置”菜单项，如下图所示：  
![4-19](4-19.png)   
![4-20](4-20.png)   
加载了配置文件之后，界面的配置会重新加载，如下图所示，  
![4-21](4-21.png)  
注意：配置文件目录中没有用的配置文件可以删除。  

# 开始检测
确保配置正确完毕后，可以开始检测任务。单击上图中左下角的绿色三角形按钮，即开始检测，如下图所示，点击左下角红色按钮即可停止检测。  
![4-22](4-22.png)  
信息栏中会实时显示当前检测的状态情况，并且如果有错误，会显示相应的错误信息，如下图所示，  
![4-23](4-23.png)  

# 常见错误
| 
 | 检查通道配置是否正确；
检查连接到摄像头的网络是否通畅；
错误提示  | 解决方法  
-|-
通道连接失败 | 检查通道配置是否正确；检查连接到摄像头的网络是否通畅；
消息发送失败 | 检查数据接口Url配置是否正确；检查网络是否通畅；
点击“连接通道”按钮后界面卡死不动，也关闭不了 | 多为通道配置错误或者网络不通畅所致，请耐心等待10到20s时间，软件会给出连接的结果，并恢复界面可点击。 